generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}


model User {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  email     String   @unique
  password  String?
  name      String?
  image     String?
  role      String   @default("user")
  createdAt DateTime @default(now())
} 

model suppliers {
  id           String   @id @default(auto()) @map("_id") @db.ObjectId
  userId       String?  @db.ObjectId
  name         String?
  email        String?
  password     String?
  companyName  String?
  phone        String?
  contactPhone String?
  address      String?
  city         String?
  state        String?
  pincode      String?
  gstNumber    String?
  description  String?
  profileImage String?
  verified     Boolean? @default(false)
  status       String?  @default("PENDING")
  category     String?
  subCategory  String?
  createdAt    DateTime @default(now()) @db.Date
  updatedAt    DateTime @updatedAt @db.Date
}

model products {
  id               String   @id @default(auto()) @map("_id") @db.ObjectId
  supplierId       String?  @db.ObjectId
  name             String?
  title            String?
  category         String?
  description      String?
  shortDescription String?
  fullDescription  String?
  specifications   String?
  price            Float?
  priceRange       String?
  capacity         String?
  unit             String?
  minOrderQty      Float?
  availability     String?  @default("available")
  tags             String[] @default([])
  images           String[] @default([])
  documents        String[] @default([])
  pdfFiles         String[] @default([])
  youtubeUrl       String?
  status           String?  @default("PENDING")
  rejectionReason  String?
  views            Int?     @default(0)
  recommendations  Int?     @default(0)
  createdAt        DateTime @default(now()) @db.Date
  updatedAt        DateTime @updatedAt @db.Date
}

model carousel_images {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  imageUrl    String
  title       String?
  description String?
  link        String   @default("/products")
  order       Int      @default(0)
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now()) @db.Date
  updatedAt   DateTime @updatedAt @db.Date
}

// Categories for organizing suppliers and products
model categories {
  id            String          @id @default(auto()) @map("_id") @db.ObjectId
  name          String          @unique
  icon          String          @default("Package")
  order         Int             @default(0)
  isActive      Boolean         @default(true)
  createdAt     DateTime        @default(now()) @db.Date
  updatedAt     DateTime        @updatedAt @db.Date
  subCategories subcategories[]
}

// SubCategories within a category
model subcategories {
  id         String     @id @default(auto()) @map("_id") @db.ObjectId
  categoryId String     @db.ObjectId
  category   categories @relation(fields: [categoryId], references: [id], onDelete: Cascade)
  name       String
  order      Int        @default(0)
  isHeading  Boolean    @default(false)
  isActive   Boolean    @default(true)
  createdAt  DateTime   @default(now()) @db.Date
  updatedAt  DateTime   @updatedAt @db.Date
}